# Semi-Supervised Learning Project

This project explores semi-supervised learning techniques for medical image segmentation, specifically focusing on pancreas segmentation.

## Experiments

### 1. Supervised Baseline

*   **Purpose:** Establish a baseline performance using only the available labeled data.
*   **Script:** `run_supervised_enhanced.sh`
*   **Output Dir:** `/scratch/lustre/home/mdah0000/smm/v14/supervised_results`
*   **Experiment Name:** `supervised_enhanced_v2`
*   **Key Parameters (v2 run):**
    *   Image Size: 256x256 (Reduced)
    *   Epochs: 100 (Target), 15 (Actual - Early Stopping)
    *   Batch Size: 8
    *   Labeled Data: 225
    *   Mixed Precision: Enabled
    *   Model Filters: 32
    *   Resources: 2 GPUs, 8 CPUs, 64GB RAM.
*   **Status (v2 run):**
    *   Training completed successfully.
    *   Generated on: 2025-05-10 16:36:28 (as per user update)
    *   Total epochs completed: 74
    *   Best validation Dice score: 0.8577 (Epoch 59)
    *   Final validation Dice score: 0.8449
    *   Final training loss: 0.0465
    *   Average epoch duration: 219.28 seconds
    *   Estimated total training time: 16226.72 seconds (4.51 hours)
    *   This strong performance provides a solid baseline for semi-supervised approaches.
*   **Visualization:** `visualize_supervised_results.py` can plot the metrics.

### 2. Mean Teacher (High Performance Version)

*   **Purpose:** Implement the Mean Teacher semi-supervised algorithm, leveraging unlabeled data alongside labeled data, with optimizations for performance and memory usage.
*   **Script:** `run_mean_teacher_highperf.sh`
*   **Key Parameters:**
    *   Image Size: 256x256 (reduced for memory)
    *   Epochs: 100
    *   Batch Size: 4
    *   Labeled Data: 30 samples
    *   Mixed Precision: Enabled (float16)
    *   Model Filters: Reduced (n_filters=16)
*   **Status:**
    *   Initial runs encountered `TypeError` related to mixed precision (float16 vs float32) during loss calculation.
    *   The `train_step` function in `run_mean_teacher_highperf.py` (embedded within the `.sh` script) was modified to explicitly cast loss components to `float32` before combination.
    *   The training was **restarted** after applying these fixes. **Status Unknown - Check logs.**
*   **Visualization:** Adapt the visualization script or check logs/plots generated by the Mean Teacher script itself (saved in its output directory).

## Next Steps

1.  **Check Mean Teacher Status:** Review the logs (`.out`, `.err`, `.csv`) for the restarted `run_mean_teacher_highperf.sh` job. Did it run? Did it show signs of learning?
2.  **Refine Visualization:** Ensure `visualize_supervised_results.py` correctly parses logs and/or Slurm output for both experiments as needed.

## Dataset Details

The dataset used for this project is **Pancreas**, which focuses on Pancreas and cancer segmentation.

*   **Reference**: Memorial Sloan Kettering Cancer Center
*   **License**: CC-BY-SA 4.0
*   **Release**: 1.0 04/05/2018
*   **Image Size**: 3D
*   **Modality**: CT
*   **Labels**:
    *   0: background
    *   1: pancreas
    *   2: cancer
*   **Number of Training Samples**: 281
*   **Number of Test Samples**: 139
